# БИТ.Управление производительностью (скрипты настройки сбора счетчиков)

![Platform](https://img.shields.io/badge/-Linux-green)
![Platform](https://img.shields.io/badge/-win--32%7C64-lightgrey)
[![GitHub release (latest SemVer)](https://img.shields.io/github/v/release/Shanginre/AddInNative_SynchClientServer)](https://github.com/Shanginre/AddInNative_SynchClientServer/releases)

Инструкция настройки сбора счетчиков производительности с серверов для продуктов "БИТ:Управление производительностью (ПРОФ)" и "БИТ:Управление производительностью (КОРП)".

## Инструкция настройки для Windows

#### Шаг 1. Откройте командную оболочку cmd с правами администратора. 

#### Шаг 2. Перейдите в папку "Настройки мониторинга на сервере" выполнив команду: 
```console	
cd полный_адрес_папки_со_скриптом_на_диске
```

#### Шаг 3. Запустите скрипт powershell "make_monitoring_settings.ps1" выполнив команду: 
```console	
powershell -File "make_monitoring_settings.ps1" -server_type xxxx [-1C_version 8.x.xx.xxxx] [-1C_cluster_port хххх] [-1C_RAS_port хххх] [-share_user хххх]
```
Состав параметров скрипта зависит от роли текущего сервера:

		*-server_type* - имя роли сервера (можно указывать несколько через символ \_). Доступны следующие имена ролей:
    		**1C** - на сервере работает только служба сервера 1С.
    		**MSSQL** - на сервере работает только служба MSSQL
    		**ostgree** - на сервере работает только служба Postgree
    		**1C_MSSQL** - на сервере работает служба 1C и служба MSSQL
    		**1C_Postgree** - на сервере работает служба 1C и служба Postgree
    		**other** - на сервере не работают служба 1С и службы СУБД.
		*-1C_version* - версия платформы кластера 1С, к которому будет подключен RAS. 
			Параметр указывается только для ролей сервера "1C", "1C_MSSQL" или "1C_Postgree".
		*-1C_cluster_port* - порт кластера кластера 1С, к которому будет подключен RAS.
			Если порт службы 1С стандартный 1540, то данный параметр можно не указывать.
			Параметр указывается только для ролей сервера "1C", "1C_MSSQL" или "1C_Postgree". 
		*-1C_RAS_port* - порт агента RAS, к которому будет обращаться система мониторинга.
			Если параметр не указан, то назначается порт агента RAS по умолчанию 1545.
			Параметр указывается только для ролей сервера "1C", "1C_MSSQL" или "1C_Postgree".
		*-share_user* - имя пользователя, для которого будут открыты сетевые папки с логами